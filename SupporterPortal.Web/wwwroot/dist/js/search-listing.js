function w(N){var x;const e=N,L=e.dataset.searchTerm||"",T=((x=e.dataset.contentTypes)==null?void 0:x.split(","))||[],z=parseInt(e.dataset.pageSize||"6"),E=e.dataset.orderBy||"",S=parseInt(e.dataset.maxSize||"-1");let h=1;const n=document.createElement("div");n.classList.add("row","g-3","search-results-container"),e.appendChild(n);const l=document.createElement("nav");l.classList.add("mt-3"),e.appendChild(l);const r=document.createElement("div");r.className="search-loading",r.innerHTML='<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>',e.appendChild(r);async function v(o){h=o;const d=n.offsetHeight;n.style.minHeight=`${d}px`,n.innerHTML="",r.style.display="flex";const s=new URLSearchParams({searchTerm:L,page:h.toString(),pageSize:z.toString(),contentTypes:T.join(",")});E&&s.set("orderBy",E),S>0&&s.set("maxSize",S.toString());try{const i=await(await fetch(`/api/search?${s}`)).json(),t=document.createDocumentFragment();i.results.forEach((a,b)=>{const m=document.createElement("div");m.className="col-md-4 search-result-item",m.style.animationDelay=`${b*100}ms`;const p=document.createElement("div");if(p.className="card h-100 shadow-sm",a.imageUrl){const g=document.createElement("img");g.className="card-img-top",g.src=a.imageUrl,g.alt=a.title,p.appendChild(g)}const y=document.createElement("div");y.className="card-body";const f=document.createElement("h5");f.className="card-title",f.textContent=a.title;const C=document.createElement("p");C.className="card-text",C.textContent=a.summary;const u=document.createElement("a");u.className="btn btn-primary",u.href=a.url,u.textContent="Read more",y.append(f,C,u),p.appendChild(y),m.appendChild(p),t.appendChild(m)}),n.appendChild(t),H(i)}finally{r.style.display="none",n.style.minHeight=""}}function H(o){const d=Math.ceil(o.totalCount/o.pageSize);if(l.innerHTML="",d<=1)return;const s=document.createElement("ul");s.className="pagination";for(let c=1;c<=d;c++){const i=document.createElement("li");i.className=`page-item ${c===o.page?"active":""}`;const t=document.createElement("a");t.className="page-link",t.href="#",t.textContent=c.toString(),t.addEventListener("click",a=>{a.preventDefault(),c!==h&&v(c)}),i.appendChild(t),s.appendChild(i)}l.appendChild(s)}v(1)}export{w as default};
