function k(N){var M;const s=N,T=s.dataset.searchTerm||"",H=((M=s.dataset.contentTypes)==null?void 0:M.split(","))||[],b=parseInt(s.dataset.pageSize||"6"),E=s.dataset.orderBy||"",x=parseInt(s.dataset.maxSize||"-1"),$=s.dataset.noResultsText;let d=1;const p=document.createElement("div");p.classList.add("position-relative","d-flex","flex-column"),s.appendChild(p);const c=document.createElement("div");c.classList.add("row","g-3","search-results-container"),p.appendChild(c);const o=document.createElement("nav");o.classList.add("mt-3"),s.appendChild(o);const m=document.createElement("div");m.className="search-loading position-absolute top-50 start-50 translate-middle mb-5",m.innerHTML=`
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  `,p.appendChild(m);let r=null,l=[];async function S(u){d=u,m.classList.remove("d-none");const i=new URLSearchParams({searchTerm:T,page:d.toString(),pageSize:b.toString(),contentTypes:H.join(",")});E&&i.set("orderBy",E),x>0&&i.set("maxSize",x.toString());try{const e=await fetch(`/api/search?${i}`),t=await e.json();if(c.innerHTML="",!e.ok||t.error){const n=t.error||`HTTP error! status: ${e.status}`;c.innerHTML=`<div class="col-12"><p class="text-danger">${n}</p></div>`,o.innerHTML="",r=null,l=[];return}if(t.results.length){const n=document.createDocumentFragment();t.results.forEach((a,P)=>{const g=document.createElement("div");g.className="col-md-4 search-result-item",g.style.animationDelay=`${P*100}ms`;const h=document.createElement("div");if(h.className="card h-100 shadow-sm border-0",a.imageUrl){const v=document.createElement("img");v.className="card-img-top",v.src=a.imageUrl,v.alt=a.title,h.appendChild(v)}const L=document.createElement("div");L.className="card-body";const y=document.createElement("h3");y.className="card-title",y.textContent=a.title;const C=document.createElement("p");C.className="card-text",C.textContent=a.summary;const f=document.createElement("a");f.className="btn btn-primary",f.href=a.url,f.textContent=a.linkText,L.append(y,C,f),h.appendChild(L),g.appendChild(h),n.appendChild(g)}),c.appendChild(n)}else{const n=t.message||$||`No results found for "${T}".`;c.innerHTML=`<div class="col-12"><p>${n}</p></div>`}z(t)}catch(e){console.error("Error loading search results:",e);const t=(e==null?void 0:e.message)||"Failed to load results.";c.innerHTML=`<div class="col-12"><p class="text-danger">${t}</p></div>`,o.innerHTML="",r=null,l=[]}finally{m.classList.add("d-none")}}function z(u){const i=Math.ceil(u.totalCount/u.pageSize);if(i<=1){o.innerHTML="",r=null,l=[];return}if(!r||l.length!==i){o.innerHTML="",r=document.createElement("ul"),r.classList.add("pagination","justify-content-center"),l=[];for(let e=1;e<=i;e++){const t=document.createElement("li");t.className=`page-item ${e===d?"active":""}`;const n=document.createElement("a");n.className="page-link",n.href="#",n.textContent=e.toString(),n.addEventListener("click",a=>{a.preventDefault(),e!==d&&S(e)}),t.appendChild(n),r.appendChild(t),l.push(t)}o.appendChild(r)}else l.forEach((e,t)=>{e.classList.toggle("active",t+1===d)})}S(1)}export{k as default};
