function b(N){var S;const s=N,y=s.dataset.searchTerm||"",M=((S=s.dataset.contentTypes)==null?void 0:S.split(","))||[],H=parseInt(s.dataset.pageSize||"6"),T=s.dataset.orderBy||"",E=parseInt(s.dataset.maxSize||"-1"),$=s.dataset.noResultsText;let h=1;const d=document.createElement("div");d.classList.add("position-relative","d-flex","flex-column"),s.appendChild(d);const r=document.createElement("div");r.classList.add("row","g-3","search-results-container"),d.appendChild(r);const c=document.createElement("nav");c.classList.add("mt-3"),s.appendChild(c);const l=document.createElement("div");l.className="search-loading position-absolute top-50 start-50 translate-middle d-flex",l.innerHTML=`
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  `,d.appendChild(l);async function L(i){h=i,l.classList.remove("d-none");const o=new URLSearchParams({searchTerm:y,page:h.toString(),pageSize:H.toString(),contentTypes:M.join(",")});T&&o.set("orderBy",T),E>0&&o.set("maxSize",E.toString());try{const a=await fetch(`/api/search?${o}`),e=await a.json();if(r.innerHTML="",!a.ok||e.error){const n=e.error||`HTTP error! status: ${a.status}`;r.innerHTML=`<div class="col-12"><p class="text-danger">${n}</p></div>`,c.innerHTML="";return}if(e.results.length){const n=document.createDocumentFragment();e.results.forEach((t,f)=>{const m=document.createElement("div");m.className="col-md-4 search-result-item",m.style.animationDelay=`${f*100}ms`;const p=document.createElement("div");if(p.className="card h-100 shadow-sm",t.imageUrl){const g=document.createElement("img");g.className="card-img-top",g.src=t.imageUrl,g.alt=t.title,p.appendChild(g)}const v=document.createElement("div");v.className="card-body";const C=document.createElement("h3");C.className="card-title",C.textContent=t.title;const x=document.createElement("p");x.className="card-text",x.textContent=t.summary;const u=document.createElement("a");u.className="btn btn-primary",u.href=t.url,u.textContent=t.linkText,v.append(C,x,u),p.appendChild(v),m.appendChild(p),n.appendChild(m)}),r.appendChild(n)}else{const n=e.message||$||`No results found for "${y}".`;r.innerHTML=`<div class="col-12"><p>${n}</p></div>`}z(e)}catch(a){console.error("Error loading search results:",a);const e=(a==null?void 0:a.message)||"Failed to load results.";r.innerHTML=`<div class="col-12"><p class="text-danger">${e}</p></div>`,c.innerHTML=""}finally{l.classList.add("d-none")}}function z(i){const o=Math.ceil(i.totalCount/i.pageSize);if(c.innerHTML="",o<=1)return;const a=document.createElement("ul");a.className="pagination";for(let e=1;e<=o;e++){const n=document.createElement("li");n.className=`page-item ${e===i.page?"active":""}`;const t=document.createElement("a");t.className="page-link",t.href="#",t.textContent=e.toString(),t.addEventListener("click",f=>{f.preventDefault(),e!==h&&L(e)}),n.appendChild(t),a.appendChild(n)}c.appendChild(a)}L(1)}export{b as default};
