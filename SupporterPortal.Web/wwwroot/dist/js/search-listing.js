function M(T){var S;const n=T,N=n.dataset.searchTerm||"",w=((S=n.dataset.contentTypes)==null?void 0:S.split(","))||[],z=parseInt(n.dataset.pageSize||"6"),E=n.dataset.orderBy||"",L=parseInt(n.dataset.maxSize||"-1");let h=1;const d=document.createElement("div");d.classList.add("position-relative","d-flex","flex-column"),n.appendChild(d);const s=document.createElement("div");s.classList.add("row","g-3","search-results-container"),d.appendChild(s);const o=document.createElement("nav");o.classList.add("mt-3"),n.appendChild(o);const i=document.createElement("div");i.className="search-loading position-absolute top-50 start-50 translate-middle d-flex",i.innerHTML=`
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  `,d.appendChild(i);async function x(l){h=l,i.classList.remove("d-none");const r=new URLSearchParams({searchTerm:N,page:h.toString(),pageSize:z.toString(),contentTypes:w.join(",")});E&&r.set("orderBy",E),L>0&&r.set("maxSize",L.toString());try{const a=await fetch(`/api/search?${r}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const t=await a.json();if(s.innerHTML="",!t.results.length)s.innerHTML='<div class="col-12"><p>No results found.</p></div>';else{const c=document.createDocumentFragment();t.results.forEach((e,f)=>{const m=document.createElement("div");m.className="col-md-4 search-result-item",m.style.animationDelay=`${f*100}ms`;const p=document.createElement("div");if(p.className="card h-100 shadow-sm",e.imageUrl){const g=document.createElement("img");g.className="card-img-top",g.src=e.imageUrl,g.alt=e.title,p.appendChild(g)}const v=document.createElement("div");v.className="card-body";const C=document.createElement("h5");C.className="card-title",C.textContent=e.title;const y=document.createElement("p");y.className="card-text",y.textContent=e.summary;const u=document.createElement("a");u.className="btn btn-primary",u.href=e.url,u.textContent="Read more",v.append(C,y,u),p.appendChild(v),m.appendChild(p),c.appendChild(m)}),s.appendChild(c)}H(t)}catch(a){console.error("Error loading search results:",a),s.innerHTML='<div class="col-12"><p class="text-danger">Failed to load results.</p></div>',o.innerHTML=""}finally{i.classList.add("d-none")}}function H(l){const r=Math.ceil(l.totalCount/l.pageSize);if(o.innerHTML="",r<=1)return;const a=document.createElement("ul");a.className="pagination";for(let t=1;t<=r;t++){const c=document.createElement("li");c.className=`page-item ${t===l.page?"active":""}`;const e=document.createElement("a");e.className="page-link",e.href="#",e.textContent=t.toString(),e.addEventListener("click",f=>{f.preventDefault(),t!==h&&x(t)}),c.appendChild(e),a.appendChild(c)}o.appendChild(a)}x(1)}export{M as default};
