function f(n){const e=n,a=n.querySelector("#newsletterFeedback"),c=n.dataset.errorText;!e||!a||e.addEventListener("submit",async l=>{if(l.preventDefault(),e.querySelectorAll(".is-invalid").forEach(t=>t.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(t=>t.textContent=""),a.innerHTML="",!e.checkValidity()){e.classList.add("was-validated");return}const d=new FormData(e);try{const r=await(await fetch("/api/newsletter/subscribe",{method:"POST",body:d})).json();if(r.success)a.innerHTML=`<div class="alert alert-success">${r.message}</div>`,e.reset(),e.classList.remove("was-validated");else if(r.errors)for(const i of Object.keys(r.errors)){const s=e.querySelector(`[name="${i}"]`),o=s==null?void 0:s.nextElementSibling;s&&o&&r.errors[i]&&(s.classList.add("is-invalid"),o.textContent=r.errors[i].join(", "))}}catch(t){console.error(t),a.innerHTML=`<div class="alert alert-danger">${c}</div>`}})}export{f as default};
