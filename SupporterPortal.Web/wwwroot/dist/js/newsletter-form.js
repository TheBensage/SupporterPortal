function f(n){const e=n,a=n.querySelector("#newsletterFeedback"),c=n.dataset.errorText;!e||!a||e.addEventListener("submit",async l=>{if(l.preventDefault(),e.querySelectorAll(".is-invalid").forEach(r=>r.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(r=>r.textContent=""),a.innerHTML="",!e.checkValidity()){e.classList.add("was-validated");return}const d=new FormData(e);try{const t=await(await fetch("/api/subscribe",{method:"POST",body:d})).json();if(t.success)a.innerHTML=`<div class="alert alert-success">${t.message}</div>`,e.reset(),e.classList.remove("was-validated");else if(t.errors)for(const i of Object.keys(t.errors)){const s=e.querySelector(`[name="${i}"]`),o=s==null?void 0:s.nextElementSibling;s&&o&&t.errors[i]&&(s.classList.add("is-invalid"),o.textContent=t.errors[i].join(", "))}}catch(r){console.error(r),a.innerHTML=`<div class="alert alert-danger">${c}</div>`}})}export{f as default};
