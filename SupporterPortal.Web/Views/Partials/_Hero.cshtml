@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockListModel>

@{
    var slides = Model?
        .Select(x => x.Content as ContentModels.HeroImageSlide)
        .Where(x => x != null)
        .ToList() ?? [];

    if (!slides.Any()) return;

    bool isMultiple = slides.Count > 1;
    string carouselId = "hero-carousel-" + Guid.NewGuid().ToString("N");
}

<div class="hero-component pb-4 mb-4" data-component="hero">
    <div id="@carouselId" class="carousel slide carousel-dark" data-bs-ride="carousel" data-bs-interval="6000">

        <div class="carousel-inner pb-2">
            @for (int i = 0; i < slides.Count; i++)
            {
                HeroImageSlide? slide = slides[i];

                <div class="carousel-item @(i == 0 ? "active" : "")">
                    <div class="container-fluid pb-5 d-flex align-items-center">
                        <div class="row align-items-center">

                            <div class="col-12 ps-0 pe-2 col-md-6 text-start">
                                <h1>@slide?.Title</h1>
                                @if (!string.IsNullOrWhiteSpace(slide?.Description))
                                {
                                    <p class="lead">@slide.Description</p>
                                }
                                @if (slide?.Cta != null)
                                {
                                    <a href="@slide.Cta.Url" class="btn btn-primary btn-lg">@slide.Cta.Name</a>
                                }
                            </div>

                            @if (slide?.BackgroundImage != null)
                            {
                                <div class="col-12 px-0 col-md-6 d-none d-md-block text-end">
                                    <img src="@slide.BackgroundImage.Url()" alt="@slide.Title" class="img-fluid rounded shadow">
                                </div>
                            }

                        </div>
                    </div>
                </div>
            }
        </div>

        @if (isMultiple)
        {
            <div class="carousel-indicators">
                @for (int i = 0; i < slides.Count; i++)
                {
                    <button type="button"
                            data-bs-target="#@carouselId"
                            data-bs-slide-to="@i"
                            class="@(i == 0 ? "active" : "")"
                            aria-label="Slide @(i + 1)"
                            aria-current="@(i == 0 ? "true" : "false")">
                    </button>
                }
            </div>
        }
    </div>
</div>
